<body>
<div id="main-container" class="container py-5">

  <div class="row text-center text-white mb-0">
    <div class="col-lg-8 mx-auto">
      <h1 class="display-4">Announcements</h1>
    </div>
  </div>

  <div class="row">
    <div class="d-flex flex-wrap align-items-center justify-content-end mb-3">
      <div>
        <button type="button" class="btn btn-soft-primary btn-sm w-120 text-white" (click)="onOpenModal('add')"><i
          class="bx bx-plus me-1"></i>Want to share? Create new announcement now
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="latestAnnouncement != undefined" class="timeline-item bg-white rounded ml-3 p-4 shadow">

    <div class="row">
      <div class="col-md-1">
        <div class="avatar-text rotated col-md-1">Recently added</div>
      </div>
      <div class="col-md-11">
        <div class="row">
          <div class="col-md-12">
            <h2 class="title h5 mb-0">{{latestAnnouncement.title}}</h2><span class="small text-gray"><i class="fa fa-clock-o mr-1"></i>{{ latestAnnouncement.creationDateTime | date:'dd MMMM, YYYY' }}</span>
            <p class="text-small mt-2 font-weight-light">{{latestAnnouncement.description}}</p>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4">
            <p class="text-small mt-2 font-weight-light">Created by: <span style="font-weight: 500">{{latestAnnouncement.author.name}} {{latestAnnouncement.author.lastName}}</span></p>
          </div>
          <div class="col-md-8">
            <p class="contact-text mt-2"> <span class="contact-text"><i class="ico fa-solid fa-square-phone"></i>{{latestAnnouncement.author.phone}}</span><i class="ico fa-solid fa-envelope"></i> {{latestAnnouncement.author.email}}</p>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="card ml-3 mt-4">
    <article class="card-body">
      <div class="row text-center mb-4 mt-3">
        <div class="col-lg-8 mx-auto">
          <h1 class="subtitle lead mb-0">Trusted government authorities</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2450.110566091322!2d20.82518120231133!3d52.114117009385176!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x471936f2f23dbdef%3A0x6fa9e7b2cfb56e4a!2sWarsaw%20Expo!5e0!3m2!1spl!2sca!4v1671828482506!5m2!1spl!2sca" width=100% height="450" frameborder="0" style="border:0"></iframe>
        </div>
        <div class="col-md-6">
          <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2550.796527513152!2d19.015212151851877!3d50.25838440896484!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4716ce47926b2713%3A0xd487b7cca270acb5!2sPunkt%20informacji%20dla%20uchod%C5%BAc%C3%B3w%3A%20Dworzec%20G%C5%82%C3%B3wny%20PKP%20Katowice!5e0!3m2!1spl!2sca!4v1671828565928!5m2!1spl!2sca" width=100% height="450" frameborder="0" style="border:0"></iframe>
        </div>
      </div>
      
      <p class="text-small mt-2 font-weight-light text-center">List of all available places can be found <a href="https://www.gov.pl/web/mswia/informacja-dla-uchodzcow-z-ukrainy">here</a>.</p>

      <div id="map"></div>
    </article>
  </div>

  <div class="row">
    <div class="col-md-6">
      <ul class="timeline">
        <div *ngFor="let announcement of announcements; index as i">
          <li *ngIf="i % 2 === 0" class="timeline-item bg-white rounded ml-3 p-4 shadow">
            <div class="timeline-arrow"></div>
            <h2 class="title h5 mb-0">{{announcement?.title}}</h2><span class="small text-gray"><i class="fa fa-clock-o mr-1"></i>{{ announcement?.creationDateTime | date:'dd MMMM, YYYY' }}</span>
            <p class="text-small mt-2 font-weight-light">{{announcement?.description}}</p>
            <div class="row">
                <p class="text-small mt-2 font-weight-light">Created by: <span style="font-weight: 500">{{announcement.author.name}} {{announcement.author.lastName}}</span></p>
            </div>
            <div class="row">
              <p class="contact-text mt-2"> <span class="contact-text"><i class="ico fa-solid fa-square-phone"></i>{{announcement.author.phone}}</span><i class="ico fa-solid fa-envelope"></i> {{announcement.author.email}}</p>
            </div>
          </li>
        </div>
      </ul>
    </div>
    <div class="col-md-6">
      <ul class="timeline">
        <div *ngFor="let announcement of announcements; index as i">
          <li *ngIf="i % 2 === 1" class="timeline-item bg-white rounded ml-3 p-4 shadow">
            <div class="timeline-arrow"></div>
            <h2 class="title h5 mb-0">{{announcement?.title}}</h2><span class="small text-gray"><i class="fa fa-clock-o mr-1"></i>{{ announcement?.creationDateTime | date:'dd MMMM, YYYY' }}</span>
            <p class="text-small mt-2 font-weight-light">{{announcement?.description}}</p>
            <div class="row">
              <p class="text-small mt-2 font-weight-light">Created by: <span style="font-weight: 500">{{announcement.author.name}} {{announcement.author.lastName}}</span></p>
            </div>
            <div class="row">
              <p class="contact-text mt-2"> <span class="contact-text"><i class="ico fa-solid fa-square-phone"></i>{{announcement.author.phone}}</span><i class="ico fa-solid fa-envelope"></i> {{announcement.author.email}}</p>
            </div>
          </li>
        </div>
      </ul>
    </div>
  </div>

</div>

<div class="modal fade" id="addAnnouncementModal" tabindex="-1" role="dialog" aria-labelledby="addAnnouncementModalLabel"
  style="margin-top: 10%;" aria-hidden="true">
  <div class="modal-dialog mt-5" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addAnnouncementModalLabel">Add Announcement</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form #addForm="ngForm" (ngSubmit)="onAddAnnouncement(addForm)">
          <div class="form-group">
            <label for="name">Title</label>
            <input type="text" ngModel name="title" class="form-control" placeholder="Announcement title" required>
          </div>
          <div class="form-group">
            <label for="description">Description</label>
            <textarea rows="4" type="description" ngModel name="description"
             class="form-control" id="description" placeholder="Description of the announcement" required="required"></textarea>
          </div>
          <div class="form-group">
            <input type="text" ngModel name="author" class="form-control" id="author" hidden="true">
          </div>
          <!-- data autogenerrowania, autor auto dodawany, status na auto ze open -->
          <div class="modal-footer">
            <button type="button" id="add-announcement-form" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

</body>

<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="confirmationMessageLabel"
  style="margin-top: 15%;" aria-hidden="true">
  <div class="modal-dialog mt-5" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmationMessageLabel">{{this.modalTitle}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>{{this.modalMessage}}</p>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary mb-0" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
